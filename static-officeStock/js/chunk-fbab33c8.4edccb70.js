(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbab33c8","chunk-32ec804c"],{1980:function(e,t,a){},"2a86":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addOrModify"},[a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("span",{staticClass:"title"},[e._v("购买基本信息")]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"申请单号"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applyNo,callback:function(t){e.$set(e.fixedData,"applyNo",t)},expression:"fixedData.applyNo"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"申请部门"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applicantDepartment,callback:function(t){e.$set(e.fixedData,"applicantDepartment",t)},expression:"fixedData.applicantDepartment"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"申请人"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applicantName,callback:function(t){e.$set(e.fixedData,"applicantName",t)},expression:"fixedData.applicantName"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"申请日期"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applyTime,callback:function(t){e.$set(e.fixedData,"applyTime",t)},expression:"fixedData.applyTime"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple",attrs:{prop:"financialNo"}},[a("el-form-item",{attrs:{label:"理财产品编号(银行)"}},[a("el-input",{attrs:{disabled:e.shuhuiSwatch},model:{value:e.ruleForm.financialNo,callback:function(t){e.$set(e.ruleForm,"financialNo",t)},expression:"ruleForm.financialNo"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"理财产品名称",prop:"productName"}},[a("el-input",{attrs:{disabled:e.shuhuiSwatch},model:{value:e.ruleForm.productName,callback:function(t){e.$set(e.ruleForm,"productName",t)},expression:"ruleForm.productName"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"开户银行",prop:"bankName"}},[a("el-input",{attrs:{disabled:e.shuhuiSwatch},model:{value:e.ruleForm.bankName,callback:function(t){e.$set(e.ruleForm,"bankName",t)},expression:"ruleForm.bankName"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"结算方式",prop:"paymentType"}},[a("el-select",{staticStyle:{marginRight:"5px"},attrs:{placeholder:"请选择二级类别",disabled:e.shuhuiSwatch},model:{value:e.ruleForm.paymentType,callback:function(t){e.$set(e.ruleForm,"paymentType",t)},expression:"ruleForm.paymentType"}},e._l(e.paymentTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"期限(天)",prop:"daysNum"}},[a("el-input",{attrs:{disabled:e.shuhuiSwatch},model:{value:e.ruleForm.daysNum,callback:function(t){e.$set(e.ruleForm,"daysNum",t)},expression:"ruleForm.daysNum"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"预计收益率(%)",prop:"expectEarn"}},[a("el-input",{attrs:{disabled:e.shuhuiSwatch},model:{value:e.ruleForm.expectEarn,callback:function(t){e.$set(e.ruleForm,"expectEarn",t)},expression:"ruleForm.expectEarn"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"起息日",prop:"startDt"}},[a("el-date-picker",{attrs:{disabled:e.shuhuiSwatch,align:"right",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.ruleForm.startDt,callback:function(t){e.$set(e.ruleForm,"startDt",t)},expression:"ruleForm.startDt"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"购买金额(元)"}},[a("el-input",{attrs:{disabled:e.shuhuiSwatch},model:{value:e.ruleForm.buyLimit,callback:function(t){e.$set(e.ruleForm,"buyLimit",t)},expression:"ruleForm.buyLimit"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"购买日期"}},[a("el-date-picker",{attrs:{disabled:e.shuhuiSwatch,align:"right",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.ruleForm.buyDt,callback:function(t){e.$set(e.ruleForm,"buyDt",t)},expression:"ruleForm.buyDt"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"购买编号",prop:"buyNo"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.buyNo,callback:function(t){e.$set(e.ruleForm,"buyNo",t)},expression:"ruleForm.buyNo"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"风险等级",prop:"riskLevelOne"}},[a("div",{staticStyle:{display:"flex",marginTop:"5px",marginLeft:"5px"}},[a("el-select",{staticStyle:{marginRight:"5px"},attrs:{placeholder:"请选择一级类别",disabled:e.shuhuiSwatch},on:{change:e.delChange},model:{value:e.ruleForm.riskLevelOne,callback:function(t){e.$set(e.ruleForm,"riskLevelOne",t)},expression:"ruleForm.riskLevelOne"}},e._l(e.oneOptions,function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})}),1),e._v(" "),a("el-select",{staticStyle:{marginRight:"5px"},attrs:{placeholder:"请选择二级类别",disabled:e.shuhuiSwatch},model:{value:e.ruleForm.riskLevelTwo,callback:function(t){e.$set(e.ruleForm,"riskLevelTwo",t)},expression:"ruleForm.riskLevelTwo"}},e._l(e.twoOptions,function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})}),1),e._v(" "),a("el-select",{attrs:{placeholder:"请选择三级类别",disabled:e.shuhuiSwatch},model:{value:e.ruleForm.riskLevelThree,callback:function(t){e.$set(e.ruleForm,"riskLevelThree",t)},expression:"ruleForm.riskLevelThree"}},e._l(e.threeOptions,function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})}),1)],1)])],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple waichureason"},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:"3",cols:"110",disabled:e.shuhuiSwatch},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple fujian"},[a("el-form-item",{attrs:{label:"附件"}},[e.dialogFormVisible?a("up-load",{attrs:{uploadTitle:"点击上传附件",hiddenUpload:e.shuhuiSwatch},model:{value:e.ruleForm.attachment,callback:function(t){e.$set(e.ruleForm,"attachment",t)},expression:"ruleForm.attachment"}}):e._e()],1)],1)])],1)],1),e._v(" "),e.shuhuiSwatch?a("div",{staticClass:"shuhui"},[a("span",{staticClass:"title"},[e._v("赎回基本信息")]),e._v(" "),a("el-form",[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"拟赎回金额(元)"}},[a("span",[e._v(e._s(e.redemSum))])])],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"未赎回本金(元)"}},[a("span",[e._v(e._s(e.basicIfo.noRedemSum))])])],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"累计赎回金额(元)"}},[a("span",[e._v(e._s(e.basicIfo.redemSumToatl))])])],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"累计利息(元)"}},[a("span",[e._v(e._s(e.basicIfo.interestToatl))])])],1)])],1)],1),e._v(" "),a("span",{staticClass:"title"},[e._v("赎回明细信息")]),e._v(" "),a("div",{staticStyle:{marginBottom:"5px"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",disabled:1!==e.selectedItem.length},on:{click:e.detel}},[e._v("删除")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"期限(天)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number"},model:{value:t.row.daysNum,callback:function(a){e.$set(t.row,"daysNum",a)},expression:"scope.row.daysNum"}})]}}],null,!1,29505185)}),e._v(" "),a("el-table-column",{attrs:{label:"收益率(%)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.expectEarn,callback:function(a){e.$set(t.row,"expectEarn",a)},expression:"scope.row.expectEarn"}})]}}],null,!1,3769649230)}),e._v(" "),a("el-table-column",{attrs:{label:"赎回本金(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.redemSum,callback:function(a){e.$set(t.row,"redemSum",a)},expression:"scope.row.redemSum"}})]}}],null,!1,2098985497)}),e._v(" "),a("el-table-column",{attrs:{label:"利息(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.redemSum*(t.row.expectEarn/365)*t.row.daysNum))]}}],null,!1,127611149)}),e._v(" "),a("el-table-column",{attrs:{label:"赎回日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.row.backDt,callback:function(a){e.$set(t.row,"backDt",a)},expression:"scope.row.backDt"}})]}}],null,!1,3528370337)})],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.shuhuiSwatch,expression:"!shuhuiSwatch"}],staticClass:"submit"},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm","save")}}},[e._v(e._s(e.isAddOrMOdify?"保存":"更新"))]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm","submit")}}},[e._v("提交")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.shuhuiSwatch,expression:"shuhuiSwatch"}],staticClass:"submit"},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.addshuhui}},[e._v(e._s(e.addOrUpdate?"新增赎回":"更新赎回"))]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.shuhuiSubmit}},[e._v("提交")])],1)],1)],1)},i=[],r=(a("c5f6"),a("ac6a"),a("f8f6")),s={components:{upLoad:r["default"]},computed:{redemSum:function(){var e=0;return this.tableData.forEach(function(t){e+=Number(t.redemSum)}),e},title:function(){return"111"===this.watchVal?"赎买赎回新增":"112"===this.watchVal?"赎买赎回更新":"200"===this.watchVal?"赎回":void 0},twoOptions:function(){var e=this,t=[];return this.oneOptions.forEach(function(a){e.ruleForm.riskLevelOne===a.codeValue&&(t=a.twoList)}),t},threeOptions:function(){var e=this,t=[];return this.oneOptions.forEach(function(a){e.ruleForm.riskLevelOne===a.codeValue&&(t=a.threeList)}),t}},data:function(){return{newId:0,oneOptions:[],paymentTypeOptions:[],isAddOrMOdify:"",shuhuiSwatch:!1,dialogFormVisible:!1,formLabelWidth:"120",watchVal:"",tableData:[],selectedItem:[],addOrUpdate:"",basicIfo:{applyNo:"",noRedemSum:"",redemSumToatl:"",interestToatl:""},ruleForm:{financialNo:"",productName:"",bankName:"",paymentType:"",daysNum:"",expectEarn:"",startDt:"",buyLimit:"",buyDt:"",buyNo:"",riskLevelOne:"",riskLevelTwo:"",riskLevelThree:"",remark:"",attachment:""},fixedData:{},rules:{financialNo:[{required:"true",message:"银行理财产品编号必填",trigger:"blur"}],productName:[{required:"true",message:"产品名称必填",trigger:"blur"}],bankName:[{required:"true",message:"开户行必填",trigger:"change"}],paymentType:[{required:"true",message:"结算方式必填",trigger:"change"}],daysNum:[{required:"true",message:"期限必填",trigger:"change"}],expectEarn:[{required:"true",message:"预计收益率必填",trigger:"change"}],startDt:[{required:"true",message:"起息日必填",trigger:"change"}],riskLevelOne:[{required:"true",message:"风险等级必填",trigger:"change"}]}}},methods:{add:function(){var e={daysNum:"",expectEarn:"",redemSum:"",backDt:""};e.newId=++this.newId,this.tableData.push(e)},detel:function(){},delChange:function(){this.ruleForm.riskLevelTwo="",this.ruleForm.riskLevelThree=""},showDialog:function(e,t){var a=this;if(this.dialogFormVisible=!this.dialogFormVisible,this.watchVal=e,this.ruleForm.buyNo=t.buyNo,this.$store.dispatch("licaichanpin/applyFinancialGetComTomList").then(function(e){if("0"!==e.status)return a.$message.error("接口出错");a.oneOptions=e.data}),this.$store.dispatch("caigoushenqing/commonTCodeGetCodeByParentId","11018").then(function(e){var t=[];e.data.options.forEach(function(e){var a={};a.value=e.value,a.label=e.label,t.push(a)}),a.paymentTypeOptions=t}),this.shuhuiSwatch=!1,"111"==e){for(var l in this.ruleForm)this.$set(this.ruleForm,l,"");this.fixedData=t,this.ruleForm.buyNo=t.buyNo,this.isAddOrMOdify=!0}else if(("112"==e||"200"==e)&&(this.fixedData.applyNo=t[0].applyNo,this.fixedData.applicantDepartment=t[0].applicantDepartment,this.fixedData.applyTime=t[0].applyTime,this.fixedData.applicantName=t[0].applicantName,this.ruleForm.financialNo=t[0].financialNo,this.ruleForm.productName=t[0].productName,this.ruleForm.bankName=t[0].bankName,this.ruleForm.paymentType=t[0].paymentType,this.ruleForm.daysNum=t[0].daysNum,this.ruleForm.expectEarn=t[0].expectEarn,this.ruleForm.startDt=t[0].startDt,this.ruleForm.buyLimit=t[0].buyLimit,this.ruleForm.buyDt=t[0].buyDt,this.ruleForm.buyNo=t[0].buyNo,this.ruleForm.riskLevelOne=Number(t[0].riskLevelOne),this.ruleForm.riskLevelTwo=Number(t[0].riskLevelTwo),this.ruleForm.riskLevelThree=Number(t[0].riskLevelThree),this.ruleForm.remark=t[0].remark,this.ruleForm.attachment=t[0].attachment=t[0].attachment,this.isAddOrMOdify=!1,"200"===e))if(this.shuhuiSwatch=!0,this.tableData=[],0===t[0].isBack){this.addOrUpdate=!0;var i={dealMark:"add",applyNo:t[0].applyNo};this.$store.dispatch("licaichanpin/applyFinanBToToEdit",i).then(function(e){a.basicIfo.interestToatl=e.data.interestToatl,a.basicIfo.noRedemSum=e.data.noRedemSum,a.basicIfo.redemSumToatl=e.data.redemSumToatl,a.basicIfo.applyNo=e.data.applyNo})}else if(1===t[0].isBack){this.addOrUpdate=!1;var r={applyNo:t[0].applyNo};this.$store.dispatch("licaichanpin/toUpdate",r).then(function(e){a.basicIfo.interestToatl=e.data.interestToatl,a.basicIfo.noRedemSum=e.data.noRedemSum,a.basicIfo.redemSumToatl=e.data.redemSumToatl,a.basicIfo.applyNo=e.data.applyNo,e.data.finanBackVOs.forEach(function(e){var t={};t.newId=++a.newId,t.daysNum=Number(e.daysNum),t.expectEarn=e.expectEarn,t.redemSum=e.redemSum,t.backDt=e.backDt,a.tableData.push(t)})})}this.$nextTick(function(){a.$refs.ruleForm.clearValidate()})},shuhuiSubmit:function(){var e=this,t={};t=this.basicIfo,t.fApplyNo=this.fixedData.applyNo,t.redemSum=this.redemSum,t.finanBackDTOS=this.tableData,this.$store.dispatch("licaichanpin/applyFinanBToSubmit",t).then(function(t){e.$message.success("提交成功!"),e.$emit("getTableList"),e.dialogFormVisible=!e.dialogFormVisible})},addshuhui:function(){var e=this,t={};t=this.basicIfo,t.fApplyNo=this.fixedData.applyNo,t.redemSum=this.redemSum,t.finanBackDTOS=this.tableData,this.$store.dispatch(this.addOrUpdate?"licaichanpin/applyFinanBToAdd":"licaichanpin/applyFinanBToUpdate",t).then(function(t){e.$message.success(e.addOrUpdate?"赎回新增成功!":"赎回更新成功!"),e.$emit("getTableList"),e.dialogFormVisible=!e.dialogFormVisible})},submitForm:function(e,t){var a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var l=a.ruleForm;if(l.applyNo=a.fixedData.applyNo,!0===a.shuhuiSwatch){if(0===a.tableData.length)return a.$message.warning("明细不能为空");var i=!1;if(a.tableData.forEach(function(e){for(var t in e)if(""==e[t])return i=!0,a.$message.warning("明细存在空值")}),i)return;l.noRedemSum=a.basicIfo.noRedemSum,l.redemSumToatl=a.basicIfo.redemSumToatl,l.interestToatl=a.basicIfo.interestToatl,l.redemSum=a.redemSum,l.finanBackDTOS=a.tableData}"submit"===t?a.$store.dispatch("licaichanpin/applyFinancialSubmit",l).then(function(e){"0"==e.status&&(a.$message.success("提交成功!"),a.$emit("getTableList"),a.dialogFormVisible=!a.dialogFormVisible)}):a.$store.dispatch(a.isAddOrMOdify?"licaichanpin/applyFinancialAdd":"licaichanpin/applyFinancialUpdate",l).then(function(e){"0"==e.status&&(a.$message.success(a.isAddOrMOdify?"新增成功":"更新成功"),a.$emit("getTableList"),a.dialogFormVisible=!a.dialogFormVisible)})})}}},o=s,n=(a("69e4"),a("2877")),u=Object(n["a"])(o,l,i,!1,null,null,null);t["default"]=u.exports},"36dd":function(e,t,a){},"3a21":function(e,t,a){"use strict";var l=a("1980"),i=a.n(l);i.a},"69e4":function(e,t,a){"use strict";var l=a("36dd"),i=a.n(l);i.a},f8f6:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-box"},[e.hiddenUpload?a("div",{staticClass:"fileView"},e._l(e.fileList,function(t){return a("h3",{key:t.uid},[a("a",{attrs:{href:e.contextPath+"attachController/download?fileId="+t.uid,target:"_blank"}},[e._v(e._s(t.name))])])}),0):e._e(),e._v(" "),e.hiddenUpload?e._e():a("div",{staticClass:"el-upload-box"},[a("el-upload",{ref:"upload",attrs:{action:e.updatePath,"auto-upload":!0,name:e.upLoadName,data:e.extraData,"file-list":e.fileList,accept:e.acceptFormat,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-error":e.handleError,"on-change":e.handleChange,"before-remove":e.beforeRemove,"before-upload":e.beforeUpload}},[a("el-button",{class:{active:e.hiddenUpload},attrs:{size:e.size,type:"primary"}},[e._v(e._s(e.uploadTitle))]),e._v(" "),e.isShowTip?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.TipTitle))]):e._e()],1)],1)])},i=[],r=(a("28a5"),a("7f7f"),a("c5f6"),a("bc3a")),s=a.n(r),o={name:"GuluUpload",model:{prop:"value",event:"update-value"},props:{value:[String],isShowTip:{type:Boolean,default:!1},hiddenUpload:{type:Boolean,default:!1},tipTitle:{type:String,default:"只能上传jpg / png文件， 且不超过500kb"},uploadTitle:{type:String,default:"点击上传"},limit:{type:Number,default:1},extraData:{type:Object,default:function(){return{bizTableName:"",bizTablePk:"",fieldName:""}}},size:{type:String,default:"small"},upLoadName:{type:String,default:"file"},contextPath:{type:String,default:"/oa-web/"},acceptFormat:{type:String,default:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF,.rp,.vsd"}},data:function(){return{updatePath:this.contextPath+"attachController/upload?fieldToken="+this.value,fileList:[]}},created:function(){var e=this;setTimeout(function(){e.$nextTick(function(){e.updatePath=e.contextPath+"attachController/upload?fieldToken="+e.value,e.getFileData()})},500)},methods:{getFileData:function(){var e=this,t=this.value;""!=t&&null!=t||(t="-1"),s()({url:this.contextPath+"attachController/getFileList?fieldToken="+t,method:"get"}).then(function(t){"0"===t.data.status?t.data.data.fileList&&e.$nextTick(function(){e.fileList=t.data.data.fileList,0==e.fileList.length&&e.$emit("update-value","")}):e.$message({type:"info",duration:1e3,message:t.data.msg})})},beforeUpload:function(e){},handleChange:function(e,t){var a=e.name.substring(e.name.lastIndexOf(".")+1),l="rp"===a,i="vsd"===a;(l||i)&&(this.$message({message:"上传文件不能是 rp 、vsd 格式!",type:"warning"}),this.$refs.upload.clearFiles())},handleExceed:function(e,t){this.$message.warning("当前限制选择 ".concat(e.length," 个文件，本次选择了 ").concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleRemove:function(e,t){var a=this;s()({url:this.contextPath+"attachController/delete?fileId="+e.uid,method:"get"}).then(function(e){"0"===e.data.status&&0==t.length&&a.$emit("update-value","")})},handleError:function(e,t,a){},handleSuccess:function(e,t,a){var l=e.data.fieldToken;void 0==l&&(l=this.value);var i=this.updatePath.split("=");""!=i[1]&&""==l&&(l=i[1]),this.updatePath=this.contextPath+"attachController/upload?fieldToken="+l,this.$emit("update-value",l)},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handlePreview:function(e){window.open(this.contextPath+"attachController/download?fileId="+e.uid)}}},n=o,u=(a("3a21"),a("2877")),c=Object(u["a"])(n,l,i,!1,null,"087933ee",null);t["default"]=c.exports}}]);