(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1515fa09"],{"4c41":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-box"},[t.hiddenUpload?a("div",{staticClass:"fileView"},t._l(t.fileList,function(e){return a("h3",{key:e.uid},[a("a",{attrs:{href:t.contextPath+"attachController/download?fileId="+e.uid,target:"_blank"}},[t._v(t._s(e.name))])])}),0):t._e(),t._v(" "),t.hiddenUpload?t._e():a("div",{staticClass:"el-upload-box"},[a("el-upload",{ref:"upload",attrs:{limit:t.limit,action:t.updatePath,"auto-upload":!0,name:t.upLoadName,data:t.extraData,"file-list":t.fileList,accept:t.acceptFormat,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-error":t.handleError,"on-change":t.handleChange,"before-remove":t.beforeRemove,"before-upload":t.beforeUpload}},[a("input",{ref:"input",attrs:{type:"hidden"},domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)}}}),t._v(" "),a("el-button",{class:{active:t.hiddenUpload},attrs:{size:t.size,type:"primary"}},[t._v("\n        "+t._s(t.uploadTitle)+"\n      ")]),t._v(" "),t.isShowTip?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.TipTitle))]):t._e()],1)],1)])},i=[],l=(a("28a5"),a("7f7f"),a("c5f6"),a("bc3a")),o=a.n(l),d={name:"Upload",props:{value:{type:String,default:""},isShowTip:{type:Boolean,default:!1},hiddenUpload:{type:Boolean,default:!1},tipTitle:{type:String,default:"只能上传jpg / png文件， 且不超过500kb"},uploadTitle:{type:String,default:"点击上传"},limit:{type:Number,default:1},extraData:{type:Object,default:function(){return{bizTableName:"",bizTablePk:"",fieldName:""}}},size:{type:String,default:"small"},upLoadName:{type:String,default:"file"},contextPath:{type:String,default:"/yhhr-web/"},acceptFormat:{type:String,default:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF,.rp,.vsd"}},data:function(){return{updatePath:this.contextPath+"attachController/upload?fieldToken="+this.value,fileList:[]}},watch:{value:function(t){this.getFileData()}},created:function(){var t=this;setTimeout(function(){t.$nextTick(function(){t.updatePath=t.contextPath+"attachController/upload?fieldToken="+t.value,t.getFileData()})},500)},methods:{updateValue:function(t){var e=t;e!==t&&(this.$refs.input.value=e),this.$emit("input",e)},getFileData:function(){var t=this,e=this.value;""!=e&&null!=e||(e="-1"),o()({url:this.contextPath+"attachController/getFileList?fieldToken="+e,method:"get"}).then(function(e){"0"===e.data.status?e.data.data.fileList&&t.$nextTick(function(){t.fileList=e.data.data.fileList,0==t.fileList.length&&t.updateValue("")}):t.$message({type:"info",duration:1e3,message:e.data.msg})})},beforeUpload:function(t){},handleChange:function(t,e){var a=t.name.substring(t.name.lastIndexOf(".")+1),n="rp"===a,i="vsd"===a;(n||i)&&(this.$message({message:"上传文件不能是 rp 、vsd 格式!",type:"warning"}),this.$refs.upload.clearFiles())},handleExceed:function(t,e){this.$message.warning("当前限制选择 ".concat(t.length," 个文件，本次选择了 ").concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleRemove:function(t,e){var a=this;o()({url:this.contextPath+"attachController/delete?fileId="+t.uid,method:"get"}).then(function(t){"0"===t.data.status&&0==e.length&&a.updateValue("")})},handleError:function(t,e,a){},handleSuccess:function(t,e,a){var n=t.data.fieldToken;void 0==n&&(n=this.value);var i=this.updatePath.split("=");""!=i[1]&&""==n&&(n=i[1]),this.updatePath=this.contextPath+"attachController/upload?fieldToken="+n,this.updateValue(n)},beforeRemove:function(t,e){return this.$confirm("确定移除 ".concat(t.name,"？"))},handlePreview:function(t){window.open(this.contextPath+"attachController/download?fileId="+t.uid)}}},u=d,s=(a("f1d0"),a("2877")),r=Object(s["a"])(u,n,i,!1,null,"2d2ff046",null);e["default"]=r.exports},9507:function(t,e,a){},f1d0:function(t,e,a){"use strict";var n=a("9507"),i=a.n(n);i.a}}]);