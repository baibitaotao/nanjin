(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f56a68b6"],{"1bfa":function(e,t,a){},bc38:function(e,t,a){"use strict";var i=a("1bfa"),r=a.n(i);r.a},f165:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addOrModify"},[a("el-dialog",{attrs:{title:"费用报销新增",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"申请单号"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applyNo,callback:function(t){e.$set(e.fixedData,"applyNo",t)},expression:"fixedData.applyNo"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"申请部门"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applicantDepartment,callback:function(t){e.$set(e.fixedData,"applicantDepartment",t)},expression:"fixedData.applicantDepartment"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"申请人"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applicantName,callback:function(t){e.$set(e.fixedData,"applicantName",t)},expression:"fixedData.applicantName"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"申请日期"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applyTime,callback:function(t){e.$set(e.fixedData,"applyTime",t)},expression:"fixedData.applyTime"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"费用报销标题",prop:"expenreim"}},[a("el-input",{model:{value:e.ruleForm.expenreim,callback:function(t){e.$set(e.ruleForm,"expenreim",t)},expression:"ruleForm.expenreim"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"总金额(元)"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.expenseAmount,callback:function(t){e.expenseAmount=t},expression:"expenseAmount"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple waichureason"},[a("el-form-item",{attrs:{label:"费用说明"}},[a("el-input",{attrs:{type:"textarea",rows:"3",cols:"110"},model:{value:e.ruleForm.expenseDesc,callback:function(t){e.$set(e.ruleForm,"expenseDesc",t)},expression:"ruleForm.expenseDesc"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple waichureason"},[a("el-form-item",{attrs:{label:"收款账号",prop:"shrnum"}},[a("el-input",{model:{value:e.ruleForm.shrnum,callback:function(t){e.$set(e.ruleForm,"shrnum",t)},expression:"ruleForm.shrnum"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple waichureason"},[a("el-form-item",{attrs:{label:"开户行",prop:"openbank"}},[a("el-input",{model:{value:e.ruleForm.openbank,callback:function(t){e.$set(e.ruleForm,"openbank",t)},expression:"ruleForm.openbank"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple waichureason"},[a("el-form-item",{attrs:{label:"收款单位",prop:"payee"}},[a("el-input",{model:{value:e.ruleForm.payee,callback:function(t){e.$set(e.ruleForm,"payee",t)},expression:"ruleForm.payee"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple waichureason"},[a("el-form-item",{attrs:{label:"支付方式",prop:"payme"}},[a("el-select",{staticStyle:{marginRight:"5px"},attrs:{placeholder:"请选择支付类型"},model:{value:e.ruleForm.payme,callback:function(t){e.$set(e.ruleForm,"payme",t)},expression:"ruleForm.payme"}},e._l(e.paymentTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple waichureason"},[a("el-form-item",{attrs:{label:"支付类别",prop:"stairid"}},[[a("div",{staticStyle:{display:"flex",marginTop:"5px",marginLeft:"5px"}},[a("el-select",{staticStyle:{marginRight:"5px"},attrs:{placeholder:"请选择一级类别"},on:{change:function(t){e.ruleForm.secondid=""}},model:{value:e.ruleForm.stairid,callback:function(t){e.$set(e.ruleForm,"stairid",t)},expression:"ruleForm.stairid"}},e._l(e.options,function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})}),1),e._v(" "),a("el-select",{staticStyle:{marginRight:"5px"},attrs:{placeholder:"请选择二级类别"},on:{change:function(t){e.ruleForm.thirdid=""}},model:{value:e.ruleForm.secondid,callback:function(t){e.$set(e.ruleForm,"secondid",t)},expression:"ruleForm.secondid"}},e._l(e.secondOptions,function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})}),1),e._v(" "),a("el-select",{attrs:{placeholder:"请选择三级类别"},model:{value:e.ruleForm.thirdid,callback:function(t){e.$set(e.ruleForm,"thirdid",t)},expression:"ruleForm.thirdid"}},e._l(e.thirdOptions,function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})}),1)],1)]],2)],1)])],1)],1),e._v(" "),a("div",{staticClass:"expenseTable",staticStyle:{marginTop:"10px"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",disabled:1!==e.selectedItem.length},on:{click:e.detel}},[e._v("删除")]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%",marginTop:"10px"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"摘要"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.abstracts,callback:function(a){e.$set(t.row,"abstracts",a)},expression:"scope.row.abstracts"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"报销金额(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number"},model:{value:t.row.expenseAmount,callback:function(a){e.$set(t.row,"expenseAmount",a)},expression:"scope.row.expenseAmount"}})]}}])})],1)],1),e._v(" "),a("div",{staticClass:"submit"},[e.isAddOrMOdify?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm","save")}}},[e._v("保存")]):e._e(),e._v(" "),e.isAddOrMOdify?e._e():a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm","update")}}},[e._v("更新")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm","submit")}}},[e._v("提交")])],1)],1)],1)},r=[],l=(a("c5f6"),a("ac6a"),{data:function(){return{options:[],tableData:[],isAddOrMOdify:"",dialogFormVisible:!1,formLabelWidth:"120",selectedItem:[],paymentTypeOptions:[],typeOptions:[],ruleForm:{expenreim:"",expenseAmount:"",expenseDesc:"",payme:"",shrnum:"",stairid:"",secondid:"",thirdid:"",openbank:"",payee:""},newId:0,fixedData:{},rules:{expenreim:[{required:"true",message:"费用报销标题",trigger:"blur"}],shrnum:[{required:"true",message:"收款账号必填",trigger:"blur"}],openbank:[{required:"true",message:"开户行必填",trigger:"blur"}],payee:[{required:"true",message:"收款单位必填",trigger:"blur"}],payme:[{required:"true",message:"支付方式必填",trigger:"change"}],stairid:[{required:"true",message:"一级支付类别必填",trigger:"change"}]}}},computed:{expenseAmount:function(){var e=0;return this.tableData.forEach(function(t){e+=Number(t.expenseAmount)}),e},secondOptions:function(){var e=this,t=[];return this.options.forEach(function(a){e.ruleForm.stairid===a.codeValue&&(t=a.twoList)}),t},thirdOptions:function(){var e=this,t=[];return this.secondOptions.forEach(function(a){a.codeValue===e.ruleForm.secondid&&(t=a.threeList)}),t}},methods:{add:function(){this.tableData.push({newId:++this.newId,abstracts:"",expenseAmount:""})},detel:function(){var e=this,t=[];this.tableData.forEach(function(a){e.selectedItem[0].newId!==a.newId&&t.push(a)}),this.tableData=t},handleSelectionChange:function(e){this.selectedItem=e},showDialog:function(e,t){var a=this;if(this.dialogFormVisible=!this.dialogFormVisible,this.$store.dispatch("expensePaidDetail/expensePaidDetailGetComTomList").then(function(e){a.options=e.data}),this.$store.dispatch("caigoushenqing/commonTCodeGetCodeByParentId","11018").then(function(e){var t=[];e.data.options.forEach(function(e){var a={};a.value=Number(e.value),a.label=e.label,t.push(a)}),a.paymentTypeOptions=t}),this.tableData=[],this.newId=0,"111"===e){for(var i in this.ruleForm)this.$set(this.ruleForm,i,"");this.fixedData=t,this.isAddOrMOdify=!0}else"112"===e&&(this.ruleForm.outTime=[],this.fixedData.applyNo=t[0].applyNo,this.fixedData.applicantDepartment=t[0].applicantDepartment,this.fixedData.applyTime=t[0].applyTime,this.fixedData.applicantName=t[0].applicantName,this.ruleForm.expenreim=t[0].expenreim,this.ruleForm.expenseDesc=t[0].expenseDesc,this.ruleForm.applyNo=t[0].applyNo,this.ruleForm.openbank=t[0].openbank,this.ruleForm.payee=t[0].payee,this.ruleForm.payme=t[0].payme,this.ruleForm.shrnum=t[0].shrnum,this.ruleForm.stairid=t[0].stairid,this.ruleForm.secondid=t[0].secondid,this.ruleForm.thirdid=t[0].thirdid,t[0].paidItemModels.forEach(function(e){var t={};t.newId=++a.newId,t.abstracts=e.abstracts,t.applyNo=e.applyNo,t.createBy=e.createBy,t.createDt=e.createDt,t.expenseAmount=e.expenseAmount,t.id=e.id,t.isDelete=e.isDelete,t.newId=e.newId,t.updateBy=e.updateBy,t.updateDt=e.updateDt,a.tableData.push(t)}),this.isAddOrMOdify=!1);this.$nextTick(function(){a.$refs.ruleForm.clearValidate()})},submitForm:function(e,t){var a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var i={};i.expenreim=a.ruleForm.expenreim,i.applyNo=a.fixedData.applyNo,i.totalAmount=a.expenseAmount,i.expenseDesc=a.ruleForm.expenseDesc,i.shrnum=a.ruleForm.shrnum,i.openbank=a.ruleForm.openbank,i.payee=a.ruleForm.payee,i.payme=a.ruleForm.payme,i.stairid=a.ruleForm.stairid,i.secondid=a.ruleForm.secondid,i.thirdid=a.ruleForm.thirdid,i.paidItemDTOs=a.tableData,"submit"===t?a.$store.dispatch("expensePaidDetail/expensePaidConditionProcessSubmit",i).then(function(e){"0"===e.status&&(a.$message.success("提交成功"),a.$emit("getTableList"),a.dialogFormVisible=!a.dialogFormVisible)}):a.$store.dispatch(a.isAddOrMOdify?"expensePaidDetail/expensePaidAdd":"expensePaidDetail/expensePaidUpdate",i).then(function(e){"0"===e.status&&(a.$message.success(a.isAddOrMOdify?"新增成功":"更新成功"),a.$emit("getTableList"),a.dialogFormVisible=!a.dialogFormVisible)})})}}}),s=l,n=(a("bc38"),a("2877")),o=Object(n["a"])(s,i,r,!1,null,null,null);t["default"]=o.exports}}]);