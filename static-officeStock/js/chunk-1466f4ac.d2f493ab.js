(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1466f4ac","chunk-32ec804c"],{1980:function(e,t,a){},"25d4":function(e,t,a){},"2d56":function(e,t,a){"use strict";var i=a("25d4"),l=a.n(i);l.a},"3a21":function(e,t,a){"use strict";var i=a("1980"),l=a.n(i);l.a},a21f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addOrModify"},[a("el-dialog",{attrs:{title:"请假申请新增",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"申请单号"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applyNo,callback:function(t){e.$set(e.fixedData,"applyNo",t)},expression:"fixedData.applyNo"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"申请部门"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applicantDepartment,callback:function(t){e.$set(e.fixedData,"applicantDepartment",t)},expression:"fixedData.applicantDepartment"}})],1)],1)])],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"申请人"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applicantName,callback:function(t){e.$set(e.fixedData,"applicantName",t)},expression:"fixedData.applicantName"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"申请日期"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.fixedData.applyTime,callback:function(t){e.$set(e.fixedData,"applyTime",t)},expression:"fixedData.applyTime"}})],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"vacationTime"},[a("el-col",{staticStyle:{height:"50px"},attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"请假时间",prop:"vacationTime"}},[a("el-date-picker",{staticStyle:{marginTop:"10px",marginLeft:"8px"},attrs:{type:"datetimerange","range-separator":"至",format:"yyyy-MM-dd HH:mm","value-format":"timestamp","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.ruleForm.vacationTime,callback:function(t){e.$set(e.ruleForm,"vacationTime",t)},expression:"ruleForm.vacationTime"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"请假类型",prop:"vacationType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.vacationType,callback:function(t){e.$set(e.ruleForm,"vacationType",t)},expression:"ruleForm.vacationType"}},e._l(e.vacationType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"请假时长(小时)"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.vacationLength,callback:function(t){e.vacationLength=t},expression:"vacationLength"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple waichureason"},[a("el-form-item",{attrs:{label:"请假事由",prop:"reason"}},[a("el-input",{attrs:{type:"textarea",rows:"3",cols:"110"},model:{value:e.ruleForm.reason,callback:function(t){e.$set(e.ruleForm,"reason",t)},expression:"ruleForm.reason"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple fujian"},[a("el-form-item",{attrs:{label:"附件"}},[e.dialogFormVisible?a("up-load",{attrs:{contextPath:"/oa-web/",uploadTitle:"点击上传附件"},model:{value:e.ruleForm.attachment,callback:function(t){e.$set(e.ruleForm,"attachment",t)},expression:"ruleForm.attachment"}}):e._e()],1)],1)])],1),e._v(" "),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm","save")}}},[e._v(e._s(e.isAddOrMOdify?"保存":"更新"))]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm","submit")}}},[e._v("提交")])],1)],1)],1)],1)},l=[],o=(a("c5f6"),a("ac6a"),a("f8f6")),n={components:{upLoad:o["default"]},computed:{vacationLength:function(){return this.ruleForm.vacationTime?0==this.ruleForm.vacationTime.length?0:((this.ruleForm.vacationTime[1]-this.ruleForm.vacationTime[0])/1e3/60/60).toFixed(1):0}},data:function(){return{fileToken:"",isAddOrMOdify:"",dialogFormVisible:!1,formLabelWidth:"120",vacationType:[],ruleForm:{applyName:"",attachment:"",vacationTime:[],reason:"",vacationType:""},fixedData:{},rules:{vacationTime:[{required:"true",message:"请假时间必填",trigger:"change"}],applyName:[{required:"true",message:"请假标题",trigger:"change"}],reason:[{required:"true",message:"请假事由必填",trigger:"blur"}],vacationType:[{required:"true",message:"请假类型必填",trigger:"change"}]}}},methods:{showDialog:function(e,t){var a=this;this.dialogFormVisible=!this.dialogFormVisible,this.$store.dispatch("applyVacation/commonTCodeGetCodeByParentId").then(function(e){if("0"!==e.status)return a.$message.error("请假类型接口请求出错");var t=[];e.data.options.forEach(function(e){var a={};a.value=Number(e.value),a.label=e.label,t.push(a)}),a.vacationType=t}),"111"==e?this.isAddOrMOdify=!0:"112"==e&&(this.isAddOrMOdify=!1),"111"==e?(this.ruleForm.vacationType="",this.ruleForm.vacationLength="",this.ruleForm.vacationTime=[],this.ruleForm.attachment="",this.ruleForm.reason="",this.fixedData=t):"112"==e&&(this.ruleForm.vacationTime=[],this.fixedData.applyNo=t[0].applyNo,this.fixedData.applicantDepartment=t[0].applicantDepartment,this.fixedData.applyTime=t[0].applyTime,this.fixedData.applicantName=t[0].applicantName,this.ruleForm.attachment=t[0].attachment||"",this.ruleForm.vacationTime.push(t[0].vacationStartTimeLong+""),this.ruleForm.vacationTime.push(t[0].vacationEndTimeLong+""),this.ruleForm.reason=t[0].reason,this.ruleForm.vacationType=Number(t[0].vacationType),this.ruleForm.applyNo=t[0].applyNo),this.$nextTick(function(){a.$refs.ruleForm.clearValidate()})},submitForm:function(e,t){var a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var i={};i.applyNo=a.fixedData.applyNo,i.attachment=a.ruleForm.attachment,i.reason=a.ruleForm.reason,i.vacationType=a.ruleForm.vacationType,i.vacationLength=a.vacationLength,i.vacationEndTime=a.ruleForm.vacationTime[1],i.vacationStartTime=a.ruleForm.vacationTime[0],"submit"===t?a.$store.dispatch("applyVacation/applyVacationSubmit",i).then(function(e){a.$message.success("提交成功"),a.$emit("getTableList"),a.dialogFormVisible=!a.dialogFormVisible}):a.$store.dispatch(a.isAddOrMOdify?"applyVacation/applyVacationAdd":"applyVacation/applyVacationUpdate",i).then(function(e){"0"==e.status&&(a.$message.success(a.isAddOrMOdify?"新增成功":"更新成功"),a.$emit("getTableList"),a.dialogFormVisible=!a.dialogFormVisible)})})}}},r=n,s=(a("2d56"),a("2877")),c=Object(s["a"])(r,i,l,!1,null,null,null);t["default"]=c.exports},f8f6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-box"},[e.hiddenUpload?a("div",{staticClass:"fileView"},e._l(e.fileList,function(t){return a("h3",{key:t.uid},[a("a",{attrs:{href:e.contextPath+"attachController/download?fileId="+t.uid,target:"_blank"}},[e._v(e._s(t.name))])])}),0):e._e(),e._v(" "),e.hiddenUpload?e._e():a("div",{staticClass:"el-upload-box"},[a("el-upload",{ref:"upload",attrs:{action:e.updatePath,"auto-upload":!0,name:e.upLoadName,data:e.extraData,"file-list":e.fileList,accept:e.acceptFormat,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-error":e.handleError,"on-change":e.handleChange,"before-remove":e.beforeRemove,"before-upload":e.beforeUpload}},[a("el-button",{class:{active:e.hiddenUpload},attrs:{size:e.size,type:"primary"}},[e._v(e._s(e.uploadTitle))]),e._v(" "),e.isShowTip?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.TipTitle))]):e._e()],1)],1)])},l=[],o=(a("28a5"),a("7f7f"),a("c5f6"),a("bc3a")),n=a.n(o),r={name:"GuluUpload",model:{prop:"value",event:"update-value"},props:{value:[String],isShowTip:{type:Boolean,default:!1},hiddenUpload:{type:Boolean,default:!1},tipTitle:{type:String,default:"只能上传jpg / png文件， 且不超过500kb"},uploadTitle:{type:String,default:"点击上传"},limit:{type:Number,default:1},extraData:{type:Object,default:function(){return{bizTableName:"",bizTablePk:"",fieldName:""}}},size:{type:String,default:"small"},upLoadName:{type:String,default:"file"},contextPath:{type:String,default:"/oa-web/"},acceptFormat:{type:String,default:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF,.rp,.vsd"}},data:function(){return{updatePath:this.contextPath+"attachController/upload?fieldToken="+this.value,fileList:[]}},created:function(){var e=this;setTimeout(function(){e.$nextTick(function(){e.updatePath=e.contextPath+"attachController/upload?fieldToken="+e.value,e.getFileData()})},500)},methods:{getFileData:function(){var e=this,t=this.value;""!=t&&null!=t||(t="-1"),n()({url:this.contextPath+"attachController/getFileList?fieldToken="+t,method:"get"}).then(function(t){"0"===t.data.status?t.data.data.fileList&&e.$nextTick(function(){e.fileList=t.data.data.fileList,0==e.fileList.length&&e.$emit("update-value","")}):e.$message({type:"info",duration:1e3,message:t.data.msg})})},beforeUpload:function(e){},handleChange:function(e,t){var a=e.name.substring(e.name.lastIndexOf(".")+1),i="rp"===a,l="vsd"===a;(i||l)&&(this.$message({message:"上传文件不能是 rp 、vsd 格式!",type:"warning"}),this.$refs.upload.clearFiles())},handleExceed:function(e,t){this.$message.warning("当前限制选择 ".concat(e.length," 个文件，本次选择了 ").concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleRemove:function(e,t){var a=this;n()({url:this.contextPath+"attachController/delete?fileId="+e.uid,method:"get"}).then(function(e){"0"===e.data.status&&0==t.length&&a.$emit("update-value","")})},handleError:function(e,t,a){},handleSuccess:function(e,t,a){var i=e.data.fieldToken;void 0==i&&(i=this.value);var l=this.updatePath.split("=");""!=l[1]&&""==i&&(i=l[1]),this.updatePath=this.contextPath+"attachController/upload?fieldToken="+i,this.$emit("update-value",i)},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handlePreview:function(e){window.open(this.contextPath+"attachController/download?fileId="+e.uid)}}},s=r,c=(a("3a21"),a("2877")),u=Object(c["a"])(s,i,l,!1,null,"087933ee",null);t["default"]=u.exports}}]);